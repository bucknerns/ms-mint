<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Soren Wacker">
        <link rel="canonical" href="https://github.com/soerendip/ms-mint/python/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Python API - MINT Documentation</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="..">MINT Documentation</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="..">Home</a>
                            </li>
                            <li >
                                <a href="../gui/">Mint GUI</a>
                            </li>
                            <li class="active">
                                <a href="./">Python API</a>
                            </li>
                            <li >
                                <a href="../jupyter/">Jupyter Integration</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../gui/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../jupyter/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#python-api">Python API</a></li>
            <li><a href="#load-files">Load files</a></li>
            <li><a href="#running-mint">Running Mint</a></li>
            <li><a href="#results">Results</a></li>
            <li><a href="#export">Export</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="python-api">Python API</h1>
<p>The <code>MINT</code> API for Python can be imported as a python object and used in a python script or interactively in a Jupyter notebook environment. A typical workflow using the Python API is described in the following:</p>
<pre><code>from ms_mint import Mint
from glob import glob
</code></pre>
<p>Fist, the Mint class has to be instantiated:</p>
<pre><code>mint = Mint(verbose=False)
</code></pre>
<h3 id="load-files">Load files</h3>
<p>One ore more peaklist files as well as mass-spec files have to be assigned to <code>mint.peaklist_files</code> and <code>mint.files</code> accordingly:</p>
<pre><code>mint.peaklist_files = ['path_to/peaklist-file.csv']
mint.files = glob('path_to/ms-files/*/**.mzML', recursive=True)
</code></pre>
<p>Calling the <code>peaklist()</code> method displays the imported and concatenated peaklists:</p>
<pre><code>print(mint.peaklist)
</code></pre>
<pre>
  peak_label    mz_mean  mz_width  rt_min  rt_max  intensity_threshold                peaklist
0          1  151.06050         5    5.07    5.09                    0  ./data/peaklist_v0.csv
1          2  216.05040         5    3.98    4.39                    0  ./data/peaklist_v0.csv
2          3  115.00320         5    3.45    4.39                    0  ./data/peaklist_v0.csv
3          4  273.00061         5    1.10    2.22                    0  ./data/peaklist_v0.csv
</pre>

<h3 id="running-mint">Running Mint</h3>
<p>Then mint can be executed calling the <code>run()</code> method:</p>
<pre><code>mint.run()

&gt; Run MINT
&gt; Total runtime: 6.18s
&gt; Runtime per file: 3.09s
&gt; Runtime per peak (79): 0.04s
</code></pre>
<h3 id="results">Results</h3>
<p>The result will be stored in the <code>results</code> and the <code>crosstab</code> attributes as <code>pandas.DataFrames()</code>. Where <code>mint.results</code> contains all results:</p>
<pre><code>print(mint.results)
</code></pre>
<pre>
peak_label    mz_mean  mz_width  rt_min  rt_max  intensity_threshold  peaklist  peak_area  ms_file ms_path  file_size  intensity_sum
1  151.06050  5    5.07    5.09  0  ./data/peaklist_v0.csv  2.879748e+03  ./data/test.mzXML  ./data  14.201964   5.607296e+10
2  216.05040  5    3.98    4.39  0 ./data/peaklist_v0.csv  4.892307e+05  ./data/test.mzXML  ./data  14.201964   5.607296e+10
3  115.00320  5    3.45    4.39  0  ./data/peaklist_v0.csv  3.916772e+07  ./data/test.mzXML  ./data  14.201964   5.607296e+10
4  273.00061  5    1.10    2.22  0  ./data/peaklist_v0.csv  6.862484e+06  ./data/test.mzXML  ./data  14.201964   5.607296e+10
1  151.06050  5    5.07    5.09  0  ./data/peaklist_v0.csv  2.879748e+03  ./data/test.mzXML  ./data  14.201964   5.607296e+10
2  216.05040  5    3.98    4.39  0  ./data/peaklist_v0.csv  4.892307e+05  ./data/test.mzXML  ./data  14.201964   5.607296e+10
3  115.00320  5    3.45    4.39  0  ./data/peaklist_v0.csv  3.916772e+07  ./data/test.mzXML  ./data  14.201964   5.607296e+10
4  273.00061  5    1.10    2.22  0  ./data/peaklist_v0.csv  6.862484e+06  ./data/test.mzXML  ./data  14.201964   5.607296e+10
</pre>

<p>and <code>crosstab()</code> can shows a compressed form of the data only containing one property e.g. the extracted <code>peak_area</code>:</p>
<pre>
...
</pre>

<h4 id="peak-shapes">Peak shapes</h4>
<p>The last property is <code>mint.rt_projections</code> which stores a dictionary of dictionaries with peak shapes:</p>
<pre>
{'1': {'./data/test.mzXML': retentionTime
  5.079267    2879.747559
  dtype: float32},
 '2': {'./data/test.mzXML': retentionTime
  3.986050    15166.202148
  3.996917    14039.182617
  4.007817    15455.113281
  4.018700    16612.851562
  4.029633    22065.619141
  4.040633    26693.970703
  4.051533    22569.896484
  4.062450    32379.552734
  4.073567    27225.439453
  4.084683    22142.037109
  4.095867    22974.357422
  4.106900    23733.207031
  4.117917    25081.419922
  4.128983    17945.343750
  4.140200    14623.268555
  4.151250    16119.997070
  4.162317    15771.708008
  4.173467    11171.838867
  4.184517    12554.623047
  ...
</pre>

<h4 id="plotting-peak-shapes">Plotting peak shapes</h4>
<p>The peak shapes can be plotted with the same function that is used by the GUI's:</p>
<pre><code>from ms_mint.plotly_tools import plot_rt_projections
plot_rt_projections(mint)
</code></pre>
<h3 id="export">Export</h3>
<p>Mint results can be exported using the <code>export()</code> method. A filename has to be provided:</p>
<pre><code>mint.export('MINT-results.xlsx')
</code></pre>
<p>An Excel file with the results is exported including the peaklist and some metadata such as date and the current verion of <code>Mint</code>.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
